<h1>Folder details</h1>

<div class="row">
<div class="span9">
<table class="table table-hover">

<tr>
<th>Name</th>
<th>Description</th>
<th>Category</th>
<% if Folder.where(:user_id => current_user, :id => params[:id]).exists? %>
<th>Upload</th>
<%end%>

</tr>
<tr>
<td><%= @folder.name %></td>
<td><%= @folder.description %></td>
<td><%= Category.where(:id => @folder.category_id).first.name %></td>
<% if Folder.where(:user_id => current_user, :id => params[:id]).exists? %>
<td><a href="/filestreams/?folder_id=<%=@folder.id%>">Upload file</a></td>
<%end%>

<tr>
<th>File Name</th>
<th>Download</th>
<% if Folder.where(:user_id => current_user, :id => params[:id]).exists? %>
<th>Delete</th>
<th>Priview</th>
<%end%>
</tr>
<% @folder.filestreams.each do |filestream|%>
<tr>
<td><%= filestream.attach_file_name %></td>
<td><%= link_to 'Download', download_filestream_path(filestream.id) %></td>
<% if Folder.where(:user_id => current_user, :id => params[:id]).exists? %>
<td><%= link_to 'Delete',delete_from_folder_filestream_path(filestream.id), data:{ confirm: "Are you sure?" } %></td>
<%end%>

<% if filestream.attach_content_type.include? "image"%>
	<td>
		<span><a href="/filestreams/<%=filestream.id%>"><%= image_tag("priview.jpeg",:size => "30x30", alt: "Priview") %></a></span>
	</td>

<%end%>

<% end %>
</tr>
</tr>
</table>

<% if Folder.where(:user_id => current_user, :id => params[:id]).exists? %>
<p><a href="/foldersharings/?folder_id=<%=@folder.id%>">Share folder to members</a></p>
<P><a href="/folders/?user_id=<%=current_user.id.to_s%>">Go to Folders</a></p>
<%end%>
</div>
</div>
